<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ—Å—Ç–∞</title>
    <style>
        body {
          font-family: Arial, sans-serif;
          margin: 20px;
        }
        h1 {
            text-align: center;
        }
        /* –°—Ç–∏–ª—å –¥–ª—è —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å—Ç–∞ */


        /* –ö–Ω–æ–ø–∫–∏ */
        .buttons {
          margin-top: 15px;
        }
        button {
          margin-right: 10px;
          padding: 6px 12px;
          border: none;
          border-radius: 4px;
          background-color: #007bff;
          color: #fff;
          cursor: pointer;
        }
        button:hover {
          background-color: #0056b3;
        }
        /* –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ */
        .comments {
          margin-top: 30px;
          max-width: 800px;
        }
        .comment {
          border-top: 1px solid #ddd;
          padding: 10px 0;
        }
        .comment-text {
          margin-bottom: 8px;
        }
        /* –õ–∞–π–∫–∏ */
        .likes {
          margin-top: 10px;
        }
        label {
            display: block;
            margin-top: 10px;
        }
        input[type="text"], input[type="number"], input[type="checkbox"] {
            width: 50%;
            padding: 5px;
            margin-top: 5px;
        }
        input[id="postName"] {
            width: 50%;
            padding: 5px;
            margin-top: 5px;
        }
        .postName-input {
            font-family: 'Courier New', monospace;
            font-size: 36px;
            font-weight: bold;
        }
        textarea {
          width: 80%;
          padding: 8px;
          margin-bottom: 10px;
          box-sizing: border-box;
        }
        .hashtag {
            color: #1da1f2; /* –¶–≤–µ—Ç –∫–∞–∫ –≤ Twitter */
            text-decoration: none;
            margin-right: 5px;
        }
        .hashtag:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>

<!-- –°–∫—Ä—ã–≤–∞–µ–º–∞—è —Ñ–æ—Ä–º–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
<div class="form-container" style="display: true;" id="userForm">
    <form th:action="@{/post/add}" method="POST" enctype="multipart/form-data">
        <input type="text" id="postName" name="name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–∞" class="postName-input" required>
        <input type="text" id="tagsInput" name="tags" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ # (–Ω–∞–ø—Ä–∏–º–µ—Ä, #–∫–æ—à–∫–∏ #—Å–æ–±–∞–∫–∏)">
        <img id="picture" src="" alt="–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä"
             style="display:none; max-width: 300px; margin-top: 20px;" />
        <textarea id="postContent" name="text" rows="4" placeholder="–¢–µ–∫—Å—Ç –ø–æ—Å—Ç–∞" required></textarea>
        <label>–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–∏–∫—É</label>
        <input type="file" id="image" name="image" accept="image/jpeg"
               onchange="showPicture(event)"/>
        <div class="likes">
            <button type="button" id="likeBtn">üëç</button>
            <span id="likeCount">0</span>
            <!-- –î–æ–±–∞–≤—å—Ç–µ —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ likeCount -->
            <input type="hidden" id="likeCountInput" name="likeCount" value="0">
        </div>
        <button type="submit">–î–æ–±–∞–≤–∏—Ç—å —ç—Ç–æ—Ç –ø–æ—Å—Ç</button>
    </form>
    <button id="addCommentBtn">–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</button><br>
</div>
<div class="post-form" id="commentFormContainer" style="display:none; margin-top:20px;">
    <h3>–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</h3>
    <form id="commentForm" th:action="@{/post/comment/add}" method="POST">
        <textarea id="commentText" rows="3" placeholder="–í–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π" required></textarea>
        <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</button>
        <button type="button" id="cancelCommentBtn">–û—Ç–º–µ–Ω–∞</button>
    </form>
</div>

<script>
    addCommentBtn.addEventListener('click', () => {
        document.getElementById('commentFormContainer').style.display = 'block';
    });
    function showPicture(event) {
        const file = event.target.files[0]; // –ø–æ–ª—É—á–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ñ–∞–π–ª
        const reader = new FileReader();

        reader.onload = function(e) {
          // —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        document.getElementById('picture').src = e.target.result;
        document.getElementById('picture').style.display = 'block';
    }

    if (file) {
      reader.readAsDataURL(file); // —á–∏—Ç–∞–µ–º —Ñ–∞–π–ª –∫–∞–∫ Data URL
    }
  }
    document.getElementById("likeBtn").addEventListener("click", function() {
        const likeCountSpan = document.getElementById("likeCount");
        const likeCountInput = document.getElementById("likeCountInput");
        let currentLikes = parseInt(likeCountSpan.textContent);

        currentLikes += 1;
        likeCountSpan.textContent = currentLikes;
        likeCountInput.value = currentLikes;
    });

    document.getElementById('tagsInput').addEventListener('input', function(e) {
        const inputText = e.target.value;
        const tagsContainer = document.getElementById('tagsContainer'); // –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ç–µ–≥–æ–≤

        // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
        tagsContainer.innerHTML = '';

        // –†–∞–∑–¥–µ–ª—è–µ–º —Ç–µ–∫—Å—Ç –ø–æ –ø—Ä–æ–±–µ–ª–∞–º –∏ –Ω–∞—Ö–æ–¥–∏–º —Ç–µ–≥–∏ (–Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å #)
        const words = inputText.split(' ');
        words.forEach(word => {
            if (word.startsWith('#')) {
                const tag = word.substring(1); // –£–±–∏—Ä–∞–µ–º #
                const tagLink = document.createElement('a');
                tagLink.href = `/tags/${tag}`; // –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ç–µ–≥–∞
                tagLink.textContent = word;
                tagLink.style.marginRight = '5px';
                tagLink.style.color = 'blue';
                tagsContainer.appendChild(tagLink);
            } else {
                // –ï—Å–ª–∏ –Ω–µ —Ç–µ–≥, –¥–æ–±–∞–≤–ª—è–µ–º –∫–∞–∫ –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç
                tagsContainer.appendChild(document.createTextNode(word + ' '));
            }
        });
    });

</script>
</body>
</html>